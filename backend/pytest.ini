# pytest設定ファイル
[tool.pytest.ini_options]
# テストディレクトリ
testpaths = ["../tests/backend"]

# テストファイルパターン
python_files = ["test_*.py", "*_test.py"]
python_classes = ["Test*"]
python_functions = ["test_*"]

# 出力設定
addopts = [
  "-v",                    # 詳細表示
  "--strict-markers",      # 未定義マーカーエラー
  "--tb=short",           # トレースバック短縮
  "--cov=app",            # カバレッジ測定対象
  "--cov-report=term-missing",  # 未カバー行表示
  "--cov-report=html",    # HTMLレポート生成
  "--cov-fail-under=70",  # 最低カバレッジ70%
]

# マーカー定義
markers = [
  "slow: 実行に時間がかかるテスト",
  "integration: 外部サービス統合テスト",
  "unit: 単体テスト",
]

# 非同期テスト設定
asyncio_mode = "auto"
