# ========================================
# ==============================================
# Supabase 設定
# ==============================================
SUPABASE_URL=your-supabase-url
SUPABASE_ANON_KEY=your-supabase-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-supabase-service-role-key

# Supabase PostgreSQL接続文字列
# SupabaseダッシュボードのSettings > Database > Connection Stringから取得
# 形式: postgresql://postgres:[YOUR-PASSWORD]@db.[PROJECT-REF].supabase.co:5432/postgres
DATABASE_URL=postgresql://postgres:[YOUR-PASSWORD]@db.[PROJECT-REF].supabase.co:5432/postgres

# ========================================
# Gemini API設定
# ========================================
GEMINI_API_KEY=your_gemini_api_key_here
# カスタムエンドポイント（オプション）。指定しない場合はGoogle公式エンドポイントを使用
GEMINI_API_ENDPOINT=
GEMINI_MODEL=gemini-2.0-flash-exp
# Review Language: zh (Chinese), ja (Japanese), en (English)
REVIEW_LANGUAGE=zh

# ========================================
# バックエンド設定
# ========================================
BACKEND_PORT=8000
CORS_ORIGINS=http://localhost:3000
LOG_LEVEL=INFO

# ========================================
# フロントエンド設定
# ========================================
VITE_SUPABASE_URL=${SUPABASE_URL}
VITE_SUPABASE_ANON_KEY=${SUPABASE_ANON_KEY}
VITE_BACKEND_URL=http://localhost:8000

# ========================================
# Whisper.cpp設定
# ========================================
WHISPER_MODEL=ggml-large-v3-turbo.bin
WHISPER_LANGUAGE=cn
WHISPER_THREADS=1

# ========================================
# Audio Chunking (for faster transcription)
# ========================================
# Enable chunking for audio files longer than CHUNK_SIZE_MINUTES
ENABLE_CHUNKING=true
# Target chunk length in minutes (recommended: 5-10 for CPU, 10-15 for GPU)
CHUNK_SIZE_MINUTES=10
# Overlap duration in seconds to maintain context at boundaries
# Recommended: 15s with VAD splitting, 30s for fixed splitting
CHUNK_OVERLAP_SECONDS=15
# Maximum chunks to process in parallel
# For whisper.cpp on CPU: 2-4 (based on CPU cores)
# For faster-whisper on GPU: 4-8 (based on VRAM)
MAX_CONCURRENT_CHUNKS=2
# Use Voice Activity Detection for smart splitting at silence points
USE_VAD_SPLIT=true
# Silence threshold in dB for VAD (lower = more sensitive)
VAD_SILENCE_THRESHOLD=-30
# Minimum silence duration in seconds to consider as split point
VAD_MIN_SILENCE_DURATION=0.5
# Merge strategy: "lcs" (text-based, recommended) or "timestamp" (simple)
MERGE_STRATEGY=lcs
