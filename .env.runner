# ========================================
# Runner Environment Configuration
# ========================================
# This file contains configuration for the GPU runner
# Copy this to .env.runner and fill in your values

# ----------------------------------------
# Server Connection (REQUIRED)
# ----------------------------------------
# URL of the main server (use your server's public URL)
SERVER_URL=https://your-server.com

# API key for runner authentication (MUST match server's RUNNER_API_KEY)
RUNNER_API_KEY=your-super-secret-runner-api-key-change-this

# Unique runner ID (multiple runners must have different IDs)
RUNNER_ID=runner-prod-01

# ----------------------------------------
# Polling Configuration
# ----------------------------------------
# How often to poll for new jobs (seconds)
POLL_INTERVAL_SECONDS=10

# Maximum concurrent jobs per runner
MAX_CONCURRENT_JOBS=4

# Maximum time per job (seconds)
JOB_TIMEOUT_SECONDS=3600

# ----------------------------------------
# GLM API Configuration (REQUIRED)
# ----------------------------------------
# GLM API Key from https://z.ai/
GLM_API_KEY=your_glm_api_key_here

# GLM Model: GLM-4.5-Air (recommended), GLM-4.5, GLM-4-Flash
GLM_MODEL=GLM-4.5-Air

# GLM API Base URL
GLM_BASE_URL=https://api.z.ai/api/paas/v4/

# Review Language: zh, ja, en
REVIEW_LANGUAGE=zh

# ----------------------------------------
# faster-whisper Configuration
# ----------------------------------------
# Device: cuda (GPU) or cpu
FASTER_WHISPER_DEVICE=cuda

# Compute type: int8_float16 (GPU, recommended), float16 (GPU, fastest), int8 (CPU)
FASTER_WHISPER_COMPUTE_TYPE=int8_float16

# Model size: large-v3-turbo (recommended), large-v3, medium, small
FASTER_WHISPER_MODEL_SIZE=large-v3-turbo

# Language: auto, zh, ja, en
WHISPER_LANGUAGE=zh

# Worker threads
WHISPER_THREADS=4

# ----------------------------------------
# Audio Chunking Configuration
# ----------------------------------------
ENABLE_CHUNKING=true
CHUNK_SIZE_MINUTES=10
CHUNK_OVERLAP_SECONDS=15
MAX_CONCURRENT_CHUNKS=4
USE_VAD_SPLIT=true
VAD_SILENCE_THRESHOLD=-30
VAD_MIN_SILENCE_DURATION=0.5
MERGE_STRATEGY=lcs

# ----------------------------------------
# Logging
# ----------------------------------------
LOG_LEVEL=INFO

# ----------------------------------------
# Data Directories
# ----------------------------------------
# Runner data directory (for transcription storage)
DATA_DIR=./data/runner

# Logs directory
LOG_DIR=./logs
